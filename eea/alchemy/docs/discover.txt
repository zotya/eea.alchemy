======================
Auto discover geo tags
======================
This package provides the following components:
 - IDiscoverGeoTags adapter
 - IAlchemyAPI utility

IDiscoverGeoTags adapter
------------------------
This package provides an auto-discover geotags adapter based on
AlchemyAPI (http://www.alchemyapi.com) that can be used to extract geotags from
object metadata (title, description, etc)

First of all let's add some content to work on

    >>> sid = folder.invokeFactory('Folder', id='sandbox')
    >>> sandbox = folder._getOb(sid)
    >>> sandbox.processForm(data=1, metadata=1, values={
    ...   'title': 'Formation of new land cover in the region of Valencia, Spain',
    ...   'description': 'Urban sprawl 1990-2000 in the province of Venice using a 1 km x 1 km grid',
    ... })

Now we need to set up the alchemy API key in portal_properties


    >>> atool = portal.portal_properties.alchemyapi
    >>> atool.key = '12345665766867'

Now adapting our content, we can easily auto-discover what locations is this
document about

    >>> from zope.component import getAdapter
    >>> from eea.alchemy.interfaces import IDiscoverGeoTags
    >>> discover = getAdapter(sandbox, IDiscoverGeoTags)
    >>> tags = discover('title')
    >>> [tag.get('text', '') for tag in tags]
    ['Spain', 'Valencia']

    >>> tags = discover('title')
    >>> [tag.get('type', '') for tag in tags]
    ['Country', 'City']

    >>> tags = discover('description')
    >>> [tag.get('text', '') for tag in tags]
    ['Venice']

    >>> tags = discover('description')
    >>> [tag.get('type', '') for tag in tags]
    ['StateOrCounty']

IAlchemyAPI utility
-------------------
In adition to this adapter you can use the IAlchemyAPI utility in order to
make more complex requests to alchemyapi.com web service.

    >>> from zope.component import getUtility
    >>> from eea.alchemy.interfaces import IAlchemyAPI
    >>> util = getUtility(IAlchemyAPI)
    >>> util.setAPIKey('12345')

    >>> res = util.TextGetRankedNamedEntities('Formation of new land cover in the region of Valencia, Spain')

    >>> entities = res['entities']
    >>> [entity['text'] for entity in entities]
    ['Spain', 'Valencia']

    >>> [entity['type'] for entity in entities]
    ['Country', 'City']
